{% extends 'personal/basic_profile.html' %}
{% load static %}
{% block sidebar %}
{% endblock sidebar %}
{% block content %}
<div class="content open">
  <!-- Navbar Start -->
  <nav
      class="navbar navbar-expand bg-secondary navbar-dark sticky-top px-4 py-0"
    >
    <a href="{% url 'personal' %}" class="navbar-brand mx-4 mb-3">
      <h3 class="text-primary">
        <i class="fa fa-user-edit me-2"></i>MARPAGA
      </h3>
    </a>
      <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
        <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
      </a>

      </a>
      <div class="navbar-nav align-items-center ms-auto">
        <div>
          <a href="{% url 'maquinas' %}">
            <button class="btn btn-primary m-2">
              <span class="d-none d-lg-inline-flex">Maquinas</span>
            </button>
          </a>
        </div>
        <div class="nav-item dropdown">
          <a
            href="#"
            class="nav-link dropdown-toggle"
            data-bs-toggle="dropdown"
          >
            <img
              class="rounded-circle me-lg-2"
              src="{% static 'img/user.jpg' %}"
              alt=""
              style="width: 40px; height: 40px"
            />
            <span class="d-none d-lg-inline-flex">{{ request.user }}</span>
          </a>
          <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0" >
            <a href="{% url 'profile' %}" class="dropdown-item">Perfil</a>
            <a href="{% url 'descargar_archivo' %}" class="dropdown-item" download="{{request.user}}.ovpn">Descargar VPN</a>
            <a href="#" class="dropdown-item">Ajustes</a>
            <a href="{% url 'logout_vista' %}" class="dropdown-item"> Cerrar Sesion</a>
          </div>
        </div>
      </div>
  </nav>
  <!-- Navbar End -->
    <div class="container rounded bg-secondary mt-5 mb-5">
        <div class="row">
            <div class="col-md-3 border-right">
                <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                    <a href="#" id="cambiarFoto" class="change-photo-link">
                        {% if request.user.jugador.foto_perfil %}
                            <img class="rounded-circle mt-5" width="150px" src="{{ request.user.jugador.foto_perfil.url }}">
                        {% else %}
                            <img class="rounded-circle mt-5" width="150px" src="{% static 'assets/img/anonimo.jpg' %}">
                        {% endif %}
                    </a>
                    <span class="font-weight-bold">{{ request.user }}</span>
                    <span class="text-danger">{{ request.user.email|default:"No tiene ningún correo asociado eres administrador" }}</span>
                    <span> </span>
                
                    <!-- Modal para cambiar la foto de perfil -->
                    <div class="modal fade" id="modalCambiarFoto" tabindex="-1" role="dialog" aria-labelledby="modalCambiarFotoLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalCambiarFotoLabel">Cambiar Foto de Perfil</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <!-- Formulario para cambiar la foto de perfil -->
                                    <form id="formFotoPerfil" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        {{ formImage.as_p }}
                                        <button type="submit" class="btn btn-primary">Guardar cambios</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-5 border-right">
                <div class="p-3 py-5">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="text-right">Perfil</h4>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6"><label class="labels">Nombre</label><input type="text" class="form-control" placeholder="first name" value='{{ request.user.username }}''></div>
                        <div class="col-md-6"><label class="labels">Surname</label><input type="text" class="form-control" value="" placeholder="surname"></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-12"><label class="labels">Mobile Number</label><input type="text" class="form-control" placeholder="enter phone number" value=""></div>
                        <div class="col-md-12"><label class="labels">Address Line 1</label><input type="text" class="form-control" placeholder="enter address line 1" value=""></div>
                        <div class="col-md-12"><label class="labels">Address Line 2</label><input type="text" class="form-control" placeholder="enter address line 2" value=""></div>
                        <div class="col-md-12"><label class="labels">Postcode</label><input type="text" class="form-control" placeholder="enter address line 2" value=""></div>
                        <div class="col-md-12"><label class="labels">State</label><input type="text" class="form-control" placeholder="enter address line 2" value=""></div>
                        <div class="col-md-12"><label class="labels">Area</label><input type="text" class="form-control" placeholder="enter address line 2" value=""></div>
                        <div class="col-md-12"><label class="labels">Email ID</label><input type="text" class="form-control" placeholder="enter email id" value=""></div>
                        <div class="col-md-12"><label class="labels">Education</label><input type="text" class="form-control" placeholder="education" value=""></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6"><label class="labels">Country</label><input type="text" class="form-control" placeholder="country" value=""></div>
                        <div class="col-md-6"><label class="labels">State/Region</label><input type="text" class="form-control" value="" placeholder="state"></div>
                    </div>
                    <div class="mt-5 text-center"><button class="btn btn-primary profile-button" type="button">Save Profile</button></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="p-3 py-5">
                    <div class="d-flex justify-content-between align-items-center experience"><span>Modificar foto de perfil</span><span class="border px-3 p-1 add-experience"><i class="fa fa-plus"></i>&nbsp;Experience: {{ request.user.jugador.puntuacion }}</span></div><br>
                    <div class="col-md-12"><label class="labels">Experience in Designing</label><input type="text" class="form-control" placeholder="experience" value=""></div> <br>
                    <div class="col-md-12"><label class="labels">Additional Details</label><input type="text" class="form-control" placeholder="additional details" value=""></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer Start -->
   <div class="container-fluid pt-4 px-4">
    <div class="bg-secondary rounded-top p-4">
      <div class="row">
        <div class="col-12 col-sm-6 text-center text-sm-start">
          &copy; <a href="#">MAPAGA</a>, All Right Reserved.
        </div>
        <div class="col-12 col-sm-6 text-center text-sm-end">
          <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
          Designed By <a href="#">Marco Sevilla</a>
          <br />Distributed By:
          <a href="#" target="_blank">Universidad de Salamanca</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer End -->
  
</div>
{% endblock content %}