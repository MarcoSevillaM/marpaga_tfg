{% extends 'personal/basic_profile.html' %}

{% block profile %}
<!-- Sale & Revenue Start -->
<div class="container-fluid pt-4 px-4">
  <div class="row g-4">
    <div class="col-sm-6 col-xl-3">
      <div
        class="bg-secondary rounded d-flex align-items-center justify-content-between p-4"
      >
        <i class="fa fa-chart-line fa-3x text-primary"></i>
        <div class="ms-3">
          <p class="mb-2">Puntuacion</p>
          <h6 class="mb-0">{{request.user.jugador.obtener_puntuacion|default:"0"}}</h6>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Sale & Revenue End -->
{% endblock profile %}

{% block machineDetails %}
<div class="container-fluid pt-4 px-4">
  <div class="row g-4">
    <div class="">
      <div class="h-100 bg-secondary rounded p-4">
        <h1>¡Bienvenido de nuevo, {{ request.user }}!</h1>
        <p>Explora nuestros desafiantes laboratorios y ¡demuestra tus habilidades en pentesting!</p>
        
        <h2>¿Nuevo en Marpaga?</h2>
        <p>Accede al apartado "Descargar VPN" desde tu foto de perfil y sigue las instrucciones para conectarte a nuestra VPN y explora nuestras máquinas disponibles para comenzar tus desafíos.</p>
        
        <h2>Tu Puntuación y Ranking</h2>
        <p>Consulta tu puntuación desde el apartado Ranking y compara tus habilidades con otros usuarios. ¿Eres el mejor pentester de Marpaga?</p>
        <h4>¡Demuestra tus habilidades!</h4>
        {% if posicion != 1 %}
        <p>¡Comienza a hackear nuestras máquinas y sube en el ranking!
        <p> ¡¡Actualmente estas en la posición numero {{posicion}}, sigue consiguiendo puntos para alcanzar la posición numero 1!!</p>
        {% else %}
        <h6>¡¡Felicidades!! Ahora mismo eres el mejor pentester de Marpaga, sigue consiguiendo puntos para mantener tu posición.</h6>
        {% endif %}
        <div class="container mt-5">
          <div class="rating" data-rating="0">
              <i class="star fas fa-star" data-rating="1"></i>
              <i class="star fas fa-star" data-rating="2"></i>
              <i class="star fas fa-star" data-rating="3"></i>
              <i class="star fas fa-star" data-rating="4"></i>
              <i class="star fas fa-star" data-rating="5"></i>
          </div>
          <p>Rating: <span class="selected-rating">0</span>/5</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // JavaScript para abrir y cerrar el modal
  var modal = document.getElementById("vpnModal");
  var btn = document.getElementById("openModalBtn");
  var span = document.getElementsByClassName("close-btn")[0];

  btn.onclick = function() {
      modal.style.display = "block";
  }

  span.onclick = function() {
      modal.style.display = "none";
  }

  window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }


</script>

{% endblock machineDetails %}

{% block scripts %}

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const stars = document.querySelectorAll(".star");
    const ratingText = document.querySelector(".selected-rating");
    let currentRating = 0;   
    stars.forEach((star) => {
      star.addEventListener("click", function() {
        const rating = parseInt(star.getAttribute("data-rating"));
        setActiveStars(rating);
        ratingText.textContent = rating;
        currentRating = rating;
      });
          
      star.addEventListener("mouseover", function() {
        const rating = parseInt(star.getAttribute("data-rating"));
        setHoverStars(rating);
      });

      star.addEventListener("mouseout", function() {
        setActiveStars(currentRating);
      });
    });
            
    function setActiveStars(rating) {
      stars.forEach((star) => {
        const starRating = parseInt(star.getAttribute("data-rating"));
        star.classList.toggle("active",  starRating <= rating);
      });
    }
            
    function setHoverStars(rating) {
      stars.forEach((star) => {
        const starRating = parseInt(star.getAttribute("data-rating"));
        star.classList.toggle("hover", starRating <= rating);
      });
    }
  });
  </script>
{% endblock scripts %}